{% extends 'base.html' %}
{% load static %}

{% block content %}

<p><a href="{% url "forum:forum-index" %}">HOME</a></p>
<!-- Posts  -->
<div class="ttitle">{{ topic.title }}</div>
<div class="ttitle">{{ topic.description }}</div>
<div class="ttitle">by {{ topic.creator }}</div>

        {% if forum.categorie == 'Archive' and user.is_superuser %}
        <p><a href="{% url 'forum:delete' forum.id topic.pk %}">DELETE</a></p>
        {% endif %}
        {% if topic.creator.id == user.id and forum.categorie != 'Archive' %}
        <p><a href="{% url 'forum:update' topic.pk %}">UPDATE</a></p>
        {% endif %}
        {% if user.is_superuser or topic.creator.id == user.id %}
        {% if forum.categorie != 'Archive'  %}
        <p><a href="{% url 'forum:delete' forum.id topic.pk %}">DELETE</a></p>
        {% endif %}
        {% endif %}
        {% if forum.categorie != 'Archive' and user.is_superuser %}
        <p><a href="{% url 'forum:archive' topic.pk %}">ARCHIVE</a></p>
        {% endif %}

<div id="list">
    {% for post in posts.object_list %}
        <div class="post">
            <span class="title">{{ post.title }}</span><br />
            by {{ post.creator }} | <span class="date">{{ post.created }}</span> <br /><br />
            {{ post.body }} <br />
        {% if post.creator.id == user.id and topic.closed == False %}
        <p><a href="{% url 'forum:updatepost' topic.id post.pk %}">UPDATE</a></p>
        <p><a href="{% url 'forum:deletepost' topic.id post.pk %}">DELETE</a></p>
        {% endif %}
        {% if user.is_superuser and topic.closed == True %}
        <p><a href="{% url 'forum:deletepost' topic.id post.pk %}">DELETE</a></p>
        {% endif %}
        </div>
    {% endfor %}
</div>

<!-- Next/Prev page links  -->
{% if posts.object_list and posts.paginator.num_pages > 1 %}
<div class="pagination">
    <span class="step-links">
        {% if posts.has_previous %}
            <a href= "?page={{ posts.previous_page_number }}">previous &lt;&lt; </a>
        {% endif %}

        <span class="current">
            &nbsp;Page {{ posts.number }} of {{ topics.paginator.num_pages }}
        </span>

        {% if posts.has_next %}
            <a href="?page={{ posts.next_page_number }}"> &gt;&gt; next</a>
        {% endif %}
    </span>
</div>
{% endif %}
    {% if topic.closed == False %}
    <form method="post" action="">
        {% csrf_token %}
        {{ form.as_p }}
    <button type="submit">Add new comment</button>
    </form>
    {% endif %}

{% endblock %}

